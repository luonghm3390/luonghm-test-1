{
  "version": 3,
  "sources": ["../../../../node_modules/@shopify/web-pixels-extension/build/esm/globals.mjs", "../../../../node_modules/@shopify/web-pixels-extension/build/esm/register.mjs", "../../../../extensions/web-pixel/src/index.js"],
  "sourceRoot": "/home/luonghm/Workspace/shopify-demo/luonghm-bai-test-1/extensions/web-pixel/src",
  "sourcesContent": ["const EXTENSION_POINT = 'WebPixel::Render';\n\nexport { EXTENSION_POINT };\n", "import { EXTENSION_POINT } from './globals.mjs';\n\nconst register = extend => shopify.extend(EXTENSION_POINT, extend);\n\nexport { register };\n", "import {register} from '@shopify/web-pixels-extension';\n\nregister(({analytics}) => {\n    analytics.subscribe('product_added_to_cart', (event) => {\n        // Example for accessing event data\n        const cartLine = event.data.cartLine;\n\n        const cartLineCost = cartLine.cost.totalAmount.amount;\n\n        const cartLineCostCurrency = cartLine.cost.totalAmount.currencyCode;\n\n        const merchandiseVariantTitle = cartLine.merchandise.title;\n\n        function generateId() {\n            let id = '';\n            while (id.length < 32) {\n                id += Math.random().toString(36).substr(2);\n            }\n            return id.substr(0, 32);\n        }\n\n        const payload = {\n            action: 'add_to_cart',\n            shop: 'shop',\n            product: merchandiseVariantTitle,\n            cart: cartLine,\n            'event-id': generateId(),\n            timestamp: new Date().toISOString(),\n            event_name: event.name,\n            event_data: {\n                cartLineCost: cartLineCost,\n                cartLineCostCurrency: cartLineCostCurrency,\n                merchandiseVariantTitle: merchandiseVariantTitle,\n            },\n        };\n\n        // Example for sending event to third party servers\n        fetch('https://c99f-42-113-128-32.ngrok-free.app/track-event', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(payload),\n            keepalive: true,\n        });\n    });\n});\n"],
  "mappings": ";;AAAA,MAAM,kBAAkB;;;ACExB,MAAM,WAAW,YAAU,QAAQ,OAAO,iBAAiB,MAAM;;;ACAjE,WAAS,CAAC,EAAC,UAAS,MAAM;AACtB,cAAU,UAAU,yBAAyB,CAAC,UAAU;AAEpD,YAAM,WAAW,MAAM,KAAK;AAE5B,YAAM,eAAe,SAAS,KAAK,YAAY;AAE/C,YAAM,uBAAuB,SAAS,KAAK,YAAY;AAEvD,YAAM,0BAA0B,SAAS,YAAY;AAErD,eAAS,aAAa;AAClB,YAAI,KAAK;AACT,eAAO,GAAG,SAAS,IAAI;AACnB,gBAAM,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,CAAC;AAAA,QAC7C;AACA,eAAO,GAAG,OAAO,GAAG,EAAE;AAAA,MAC1B;AAEA,YAAM,UAAU;AAAA,QACZ,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,SAAS;AAAA,QACT,MAAM;AAAA,QACN,YAAY,WAAW;AAAA,QACvB,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,QAClC,YAAY,MAAM;AAAA,QAClB,YAAY;AAAA,UACR;AAAA,UACA;AAAA,UACA;AAAA,QACJ;AAAA,MACJ;AAGA,YAAM,yDAAyD;AAAA,QAC3D,QAAQ;AAAA,QACR,SAAS;AAAA,UACL,gBAAgB;AAAA,QACpB;AAAA,QACA,MAAM,KAAK,UAAU,OAAO;AAAA,QAC5B,WAAW;AAAA,MACf,CAAC;AAAA,IACL,CAAC;AAAA,EACL,CAAC;",
  "names": []
}
